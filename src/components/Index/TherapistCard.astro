---
import { Image } from "astro:assets";
import KM from "../../assets/images/Index/KM-image.jpg";

const therapists = [
  {
    name: "Karine Maraval",
    role: "Fondatrice",
    phone: "07.60.48.48.06",
    href: "/a-propos",
    image: KM,
    alt: "Photo de Karine Maraval",
  },
];

const telHref = (p: string) => `tel:${p.replace(/[.\s]/g, "")}`;
---

<h1>Qui sommes-nous ?</h1>

<ul class="cards" role="list">
  {
    therapists.map((therapist) => (
      <li class="card">
        <div class="avatar">
          <Image
            src={therapist.image}
            alt={therapist.alt}
            width={220}
            height={220}
            class="therapist-image"
          />
        </div>
        <div class="card-content">
          <h4 class="name">{therapist.name}</h4>
          <p class="phone">
            <a
              href={telHref(therapist.phone)}
              aria-label={`Téléphoner à ${therapist.name}`}
            >
              {therapist.phone}
            </a>
            <p class="role">{therapist.role}</p>
          </p>
          <div class="button-container">
            <a href={therapist.href} class="button">
              {" "}
              Me découvrir{" "}
            </a>
          </div>
        </div>
      </li>
    ))
  }
</ul>

<style lang="scss">
  @use "@styles/config/variables" as *;
  @use "@styles/config/mixins" as *;

  h1 {
    text-align: center;
    margin: 2rem auto;
  }

  .cards {
    width: 80%;
    list-style: none;
    margin: 3rem auto;
    padding: 0;
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    .card {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
      border-radius: 20px;
    }
    .card-content {
      width: 100%;
      text-align: center;
      .name {
        margin: 0;
        color: var(--important-color);
        font-size: clamp(1.2rem, 1.5vw + 0.9rem, 1.5rem);
      }
      .role {
        font-style: italic;
        font-weight: 600;
      }
    }
  }

  .avatar {
    margin-bottom: 1.5rem;

    .therapist-image {
      width: 190px;
      height: 190px;
      object-fit: cover;
      border-radius: 50%;
      border: 6px solid var(--important-color);
    }
  }

  .phone {
    a {
      color: var(--important-color);
      text-decoration: none;
    }
  }

  #discover-link {
    border: 1px solid var(--important-color);
  }
</style>
